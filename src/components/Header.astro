---
import { SITE_TITLE } from '../consts';
import HeaderLink from './HeaderLink.astro';
---

<header>
	<nav>
		<h2><a href="/">{SITE_TITLE}</a></h2>
		<div class="internal-links">
			<HeaderLink href="/">Index</HeaderLink>
			<HeaderLink href="/blog">Authors</HeaderLink>
			<HeaderLink href="/about">About</HeaderLink>
		</div>
		<button class="theme-toggle" type="button" aria-label="Toggle color theme">
			<span aria-hidden="true">☀︎</span>
			<span aria-hidden="true">☾</span>
		</button>
	</nav>
</header>
<script is:inline>
	const toggle = document.querySelector('.theme-toggle');
	if (toggle) {
		toggle.addEventListener('click', () => {
			const root = document.documentElement;
			const next = root.dataset.theme === 'dark' ? 'light' : 'dark';
			root.dataset.theme = next;
			window.localStorage.setItem('theme', next);
		});
	}
</script>
<style>
	header {
		margin: 0;
		padding: 0 1.5rem;
		background: var(--header-bg);
		backdrop-filter: blur(12px);
		position: fixed;
		width: 100%;
		z-index: 20;
		border-bottom: 1px solid var(--color-border);
	}
	h2 {
		margin: 0;
		font-size: 1rem;
		font-family: var(--font-body);
		font-weight: 600;
	}

	h2 a,
	h2 a.active {
		text-decoration: none;
		color: var(--color-text);
	}
	nav {
		display: flex;
		align-items: center;
		justify-content: space-between;
		min-height: var(--header-height);
		gap: 1rem;
	}
	.internal-links {
		display: flex;
		gap: 1rem;
		align-items: center;
	}
	nav a {
		padding: 0.5rem 0.25rem;
		color: var(--color-text);
		border-bottom: 2px solid transparent;
		text-decoration: none;
		font-family: var(--font-ui);
		font-size: 14px;
		font-weight: 500;
		letter-spacing: 0.01em;
		transition: var(--transition-color);
	}
	nav a.active {
		text-decoration: none;
		border-bottom-color: var(--color-accent);
		color: var(--color-accent);
	}
	.theme-toggle {
		display: inline-flex;
		align-items: center;
		gap: 0.35rem;
		padding: 0.35rem 0.6rem;
		border: 1px solid var(--color-border);
		border-radius: 999px;
		font-size: 13px;
		color: var(--color-text);
		background: var(--color-surface);
		transition: var(--transition-color);
	}
	.theme-toggle span {
		opacity: 0.6;
	}
	:root[data-theme='dark'] .theme-toggle span:first-child {
		opacity: 0.3;
	}
	:root[data-theme='light'] .theme-toggle span:last-child {
		opacity: 0.3;
	}
	@media (max-width: 720px) {
		nav {
			flex-wrap: wrap;
			padding: 0.5rem 0;
		}
	}
</style>
